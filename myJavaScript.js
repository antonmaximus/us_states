(function(){function c(){var q=document.getElementById("result");while(q.firstChild){q.removeChild(q.firstChild)}document.getElementById("result").style.display="none"}function a(q){return q.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var f;function e(r){var s,q;for(q=0;q<f.data.length;q+=1){if(f.data[q].State==r){s=f.data[q]}}if(document.getElementById("stateName").innerHTML!=s.State){document.getElementById("stateName").innerHTML=s.State;document.getElementById("capital").innerHTML=s.Capital;document.getElementById("area_sqmi").innerHTML=a(s.Area_sqmi)+" sq mi";document.getElementById("population").innerHTML=a(s.Population);document.getElementById("flag").src=s.Flag;document.getElementById("map").src=s.Map}}function n(u){var s=0,q="",r=false,t=/^[A-Za-z\s]/;for(s;s<u.length;s+=1){if(u[s]==">"){r=false}else{if(u[s]=="<"){r=true}}if(!r&&t.test(u[s])){q+=u[s]}}return q}function m(q){var r=n(q);document.getElementById("searchInput").value=r;c();e(r)}function j(q){m(q.target.innerHTML)}function d(){var q=document.getElementById("highlighted");if(q!=null){q.removeAttribute("id")}}function g(s){var r,q,t;r=document.getElementById("result");for(q=0;q<s.length;q+=1){t=document.createElement("li");t.innerHTML=s[q];t.addEventListener("click",j,false);t.addEventListener("mouseover",d,false);r.appendChild(t)}if(s.length>0){document.getElementById("result").style.display="block"}}function b(v){var t,r=true,s=false,u=/^[A-Za-z\s]/,q="";for(t=0;t<v.length;t+=1){if(v[t]==">"){s=false}else{if(v[t]=="<"){s=true}}if(!s&&u.test(v[t])&&r){q+=v[t].toUpperCase();r=false}else{q+=v[t];r=(v[t]==" ")?true:r}}return q}function i(r,u){var s,q,t;s=[];if(u.data.length==0){c()}else{r=r.toLowerCase();for(q=0;q<u.data.length;q+=1){t=u.data[q].State;t=t.toLowerCase().replace(r,"<strong>"+r+"</strong>");t=b(t);s.push(t)}c();g(s)}}function l(z,s,v,r){var y,w,q,t,x=new XMLHttpRequest(),u="?input="+s+"&field=State&t="+Math.random();x.onreadystatechange=function(){if(x.readyState===4){if(x.status===200){if(v){y=JSON.parse(x.responseText);v(y);f=y;i(s,y)}}else{if(r){r(x);w=['"Data Not Available"'];c();g(w);q=document.getElementById("result");t=q.getElementsByTagName("li");t[0].style.cursor="default";t[0].style.background="none";t[0].removeEventListener("click",j,false);t[0].removeEventListener("mouseover",j,false)}}}};x.open("GET",z+u,true);x.send()}function k(){var q=document.getElementById("searchInput").value;if(q.length>=2){l("serverSideParser.php",q,function(r){console.log(r)},function(r){console.error(r)})}else{c()}}function o(s,q){var r;if(s.nextSibling==null&&s.previousSibling==null){return null}if(q=="40"){r=(s.nextSibling!=null?s.nextSibling:s.parentNode.firstChild)}else{if(q=="38"){r=(s.previousSibling!=null?s.previousSibling:s.parentNode.lastChild)}}return r}function h(s){var u=document.getElementById("highlighted"),r,q,t;if(u==null){r=document.getElementById("result").getElementsByTagName("li");q=(s=="40"?0:r.length-1);r[q].id="highlighted"}else{t=o(u,s);if(t){t.id="highlighted";u.removeAttribute("id")}}}function p(t){var r=t.keyCode,s=document.getElementById("highlighted"),q=document.getElementById("result").getElementsByTagName("li");if(r=="13"){if(s!=null){m(s.innerHTML)}else{if(q.length>=2){h("40")}else{if(q.length==1){m(q[0].innerHTML)}else{if(q.length==0){k()}}}}}else{if(r=="38"||r=="40"){h(r)}else{if(r=="27"){c()}}}}document.getElementById("searchInput").addEventListener("input",k,false);document.getElementById("searchInput").addEventListener("keydown",p,false)}());